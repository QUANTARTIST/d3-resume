var d3Resume=function(d){var l=null,n=d3.time.format("%m/%d/%Y"),p=d3.time.format("%Y-%m-%d").parse,g=null,h=null,q=null,r=null,s=function(d){var a=0;d.forEach(function(c){c.id=a++;c.from=p(c.from);null==c.to?c.pto=new Date:(c.to=p(c.to),c.pto=c.to)})},t=function(d){d.forEach(function(a){a.diameter=h(a.pto)-h(a.from)});d.sort(function(a,c){return c.diameter-a.diameter})},k=function(d,a,c,e,m){d.append("text").style("fill","white").attr("font-size",a).style("font-weight",e).text(m).attr("transform",
c)},v=function(g,a,c,e,m,f){f=g.selectAll("g.info."+e).data(c).enter().append("g").attr("class",function(b){return e+b.id}).classed("info",!0).classed(e,!0).attr("transform","translate("+[0.1*d.width,f]+")").attr("fill-opacity",0);k(f,"18px","translate(0,0)","normal",function(b){return b.type});k(f,"18px","translate(0,25)","normal",function(b){return b.title});k(f,"23px","translate(0,50)","normal",function(b){return b.institution});k(f,"14px","translate(0,70)","bold",function(b){var a=n(b.from)+" - ";
return a=null==b.to?a+"Now":a+n(b.to)});f=f.selectAll("text.description").data(function(b,a){var c=70;return b.description.split("\n").map(function(b){c+=20;return{text:b,position:c}})}).enter();k(f,"14px",function(b){return"translate(0,"+b.position+")"},"normal",function(b){return b.text});a.selectAll("path."+e).data(c).enter().append("path").classed(e,!0).classed("item",!0).attr("fill",function(b){b=CryptoJS.SHA1(b.title).toString(CryptoJS.enc.Hex);return"#"+(Array(6).join("0")+b.toString(16)).substr(-6).split("").reverse().join("")}).attr("fill-opacity",
0.6).attr("stroke","#FFFFFF").attr("stroke-width","2").attr("d",function(b){b=b.diameter;var a=b/2;return"M0,0 q "+a+" "+m*(100+0.7*a)+" "+b+" 0 z"}).attr("transform",function(b){return"translate("+[h(b.from),0]+")"}).on("mouseover",function(b){a.selectAll("path.item").transition().attr("stroke-width","1").attr("fill-opacity",0);d3.select(this).transition().attr("stroke-width","2").attr("fill-opacity",1);l&&(clearTimeout(l),l=null);u();g.selectAll("g.info."+e+"."+e+b.id).transition().attr("fill-opacity",
1)}).on("mouseout",function(b){a.selectAll("path.item").transition().attr("stroke-width","2").attr("fill-opacity",0.5);l=setTimeout(u,3E3)})},u=function(){g.selectAll("g.info").transition().attr("fill-opacity",0)},g=d3.select(d.wrapperSelector).append("svg").attr("width",d.width).attr("height",d.height),h=d3.time.scale().range([20,d.width-20]),q=d3.scale.linear().range([d.height,0]);q.domain([0,d.height]);r=d3.svg.axis().scale(h).orient("bottom").ticks(30).tickFormat(d3.time.format("%Y-%m"));d3.json("/data/resume.json",
function(k,a){s(a.experience);s(a.study);h.domain([d3.min([d3.min(a.experience,function(a){return a.from}),d3.min(a.study,function(a){return a.from})]),d3.max([d3.max(a.experience,function(a){return a.pto}),d3.max(a.study,function(a){return a.pto})])]);t(a.experience);t(a.study);var c=g.append("g").attr("class","graph-container").attr("transform","translate("+[0,d.height-200]+")"),e=c.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(r);e.selectAll("path").attr("fill","none").attr("fill-opacity",
"1").attr("stroke","#FFFFFF").attr("stroke-width","1px");e.selectAll("text").style("text-anchor","end").style("fill","white").attr("transform","rotate(-60)");c.append("text").style("fill","white").classed("label",!0).attr("font-size","18px").text("WORKS").style("text-anchor","center").attr("transform","translate(15,-55) rotate(-90)");c.append("text").style("fill","white").classed("label",!0).attr("font-size","18px").text("STUDIES").style("text-anchor","center").attr("transform","translate(15,130) rotate(-90)");
v(g,c,a.experience,"experience",-1,d.height/8);v(g,c,a.study,"study",1,d.height/8)})};